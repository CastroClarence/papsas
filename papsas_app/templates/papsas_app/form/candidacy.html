{% extends 'papsas_app/layout.html' %}

{% load static %}

{% block title %}
    Candidacy
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'papsas_app/css/candidacy.css' %}">
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>
{% endblock %}

{% block body %}
<section class="candidacy-form">
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
            <div class="px-0 pt-4 pb-0 mt-3 mb-3">
                <h2 id="heading">FILLING OF CANDIDACY PERIOD</h2>
                <p>{{ ongoingElection.startDate }} - {{filing_period}}</p>
                <form id="msform">
                    <!-- progressbar -->
                    <ul id="progressbar">
                        <li class="active" id="account"><strong>Requirement</strong></li>
                        <li id="personal"><strong>Candicacy Form</strong></li>
                        <li id="payment"><strong>Credentials</strong></li>
                        <li id="confirm"><strong>Finish</strong></li>
                    </ul>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                    </div> <br> <!-- fieldsets -->
                    <fieldset>
                        <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Requirements Information:</h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 1 - 4</h2>
                                </div>
                            </div> 
                            <div class="table-container">
                                <p class="heading">For a member to declare his/her candidacy, one must have:</p>
                                <table class="requirements-table">
                                    <thead>
                                        <tr>
                                            
                                            <th>Requirement</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Attended at least two events</td>
                                            <td class="icon">{% if attended_event >= 2 %}<i class="fas fa-circle-check"></i>{% else %}<i class="fas fa-circle-xmark"></i>{% endif %}</td> <!-- Check icon -->
                                        </tr>
                                        <tr>
                                            <td>Masteral Degree</td>
                                            <td class="icon">{% if user.tor %}<i class="fas fa-circle-check"></i>{% else %}<i class="fas fa-circle-xmark"></i>{% endif %}</td> <!-- X icon -->
                                        </tr>
                                    </tbody>
                                </table>
                                <p>
                                    <a href="link-to-guidelines.html" target="_blank" class="guidelines-link">Click here to read the full guidelines for filling candidacy.</a>
                                </p>
                            </div>
                        </div> 
                        {% if attended_event >= 2 and user.tor and has_declared is None %}
                            <input type="button" name="next" class="next action-button" value="Next" />
                        {% else %}
                            <input type="button" name="next" class="next action-button" value="Next" />
                        {% endif %}
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Candicacy Form: </h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 2 - 4</h2>
                                </div>
                            </div> 
                            <div class="form-container">
                                <div class="form-row">
                                  <div class="form-group">
                                    <label for="name">Name:</label>
                                    <input type="text" id="name" name="name" value='{{ request.user.first_name }} {{ request.user.last_name }}' required disabled>
                                  </div>
                                  <div class="form-group">
                                    <label for="region">Region:</label>
                                    <input type="text" id="region" name="region" value='{{ request.user.region }}' disabled required>
                                  </div>
                                </div>
                                <div class="form-row">
                                  <div class="form-group">
                                    <label for="institution">Institution:</label>
                                    <input type="text" id="institution" name="institution" value='{{ request.user.institution }}' required disabled>
                                  </div>
                                </div>
                                <div class="form-group">
                                    <label for="transcript">Transcript of Records:</label>
                                    <input type="file" id="transcript" name="transcript" required>
                                    {% if request.user.tor %}
                                        <img src='{{ request.user.tor.url }}' alt="User's TOR">
                                    {% endif %}
                                </div>
                              </div>
                              
                        </div> <input type="button" name="next" class="next action-button" value="Next" /> <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Credential:</h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 3 - 4</h2>
                                </div>
                            </div> 
                            <div class="form-container">
                                <div class="form-group">
                                <label for="credentials">Credentials (Provide two paragraphs about your credentials):</label>
                                <textarea id="credentials" name="credentials" rows="10" maxlength="2500" placeholder="Type your credentials here..."></textarea>
                              </div>
                            </div>
                        </div> <input type="button" name="next" class="next action-button" value="Submit" /> <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                    </fieldset>
                    <fieldset>
                        <div class="form-card">
                            <div class="row">
                                <div class="col-7">
                                    <h2 class="fs-title">Finish:</h2>
                                </div>
                                <div class="col-5">
                                    <h2 class="steps">Step 4 - 4</h2>
                                </div>
                            </div> <br><br>
                            <div class="finish">
                           <p>Thank you for applying for candidacy. We appreciate your commitment to serve the PAPSAS INC. Please note that the election will officially begin on December 2, 2024. We wish you the best of luck in your campaign and look forward to seeing the positive impact you aim to make.</p>
                        </div>
                        </div>
                        <input type="button" name="next" class="next action-button" value="Home"/>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
</section>
<section class="voting-process">
    <div class="voting-title">
        <h2>PAPSAS ELECTION 2024</h2>
        <p>November 26, 2024 - December 1, 2024</p>
        <p>Please select up to two candidates to cast your vote.</p>

        <div class="profile-container">

            <!-- Profile Card 1 -->
            <label class="profile-card">
                <input type="checkbox" id="profile1">
                <div class="profile-content">
                    <img src="media/papsas_app/images/president.jpg" alt="Profile 1">
                    <span>Profile 1</span>
                    <a href="#" class="view-profile">View Candidacy</a>
                </div>
            </label>
        
            <!-- Profile Card 2 -->
            <label class="profile-card">
                <input type="checkbox" id="profile2">
                <div class="profile-content">
                    <img src="media/papsas_app/images/president.jpg" alt="Profile 2">
                    <span>Profile 2</span>
                    <a href="#" class="view-profile">View Candidacy</a>
                </div>
            </label>
        
            <!-- Profile Card 3 -->
            <label class="profile-card">
                <input type="checkbox" id="profile3">
                <div class="profile-content">
                    <img src="media/papsas_app/images/president.jpg" alt="Profile 3">
                    <span>Profile 3</span>
                    <a href="#" class="view-profile">View Candidacy</a>
                </div>
            </label>
            
        </div>

        <!-- Submit Button -->
        <div class="submit-container" style="text-align: center; margin-top: 20px;">
            <button type="button" id="submit-vote" class="submit-vote-button">Submit Vote</button>
        </div>
    </div>
</section>
{% endblock %}

{% block script %}
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
<script>
                // Wait for DOM to be ready
                $(document).ready(function(){

            var current_fs, next_fs, previous_fs; //fieldsets
            var opacity;
            var current = 1;
            var steps = $("fieldset").length;

            setProgressBar(current);

            $(".next").click(function(){

            current_fs = $(this).parent();
            next_fs = $(this).parent().next();

            //Add Class Active
            $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

            //show the next fieldset
            next_fs.show();
            //hide the current fieldset with style
            current_fs.animate({opacity: 0}, {
            step: function(now) {
            // for making fielset appear animation
            opacity = 1 - now;

            current_fs.css({
            'display': 'none',
            'position': 'relative'
            });
            next_fs.css({'opacity': opacity});
            },
            duration: 500
            });
            setProgressBar(++current);
            });

            $(".previous").click(function(){

            current_fs = $(this).parent();
            previous_fs = $(this).parent().prev();

            //Remove class active
            $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

            //show the previous fieldset
            previous_fs.show();

            //hide the current fieldset with style
            current_fs.animate({opacity: 0}, {
            step: function(now) {
            // for making fielset appear animation
            opacity = 1 - now;

            current_fs.css({
            'display': 'none',
            'position': 'relative'
            });
            previous_fs.css({'opacity': opacity});
            },
            duration: 500
            });
            setProgressBar(--current);
            });

            function setProgressBar(curStep){
            var percent = parseFloat(100 / steps) * curStep;
            percent = percent.toFixed();
            $(".progress-bar")
            .css("width",percent+"%")
            }

            $(".submit").click(function(){
            return false;
            })

            });
</script>
{% endblock %}