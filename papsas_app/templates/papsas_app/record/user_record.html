{% extends 'papsas_app/layout.html' %}
{% load render_table from django_tables2 %}
{% load static %}
{% load i18n %}

{% block head %}
    <link rel="stylesheet" href="{% static 'papsas_app/datatable.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %}

{% block body %}
<div>
    <form method="get" class="mb-4" id="filter-form" >
        <div class="row">
            <div class="col-md-3 mb-3">
                <label for="id_id">Id:</label>
                <input type="text" name="id" id="id_id" class="form-control" value="{{ filter.form.id.value|default:'' }}">
            </div>
            <div class="col-md-3 mb-3">
                <label for="id_email">Email:</label>
                <input type="text" name="email" id="id_email" class="form-control" value="{{ filter.form.email.value|default:'' }}">
            </div>
            <div class="col-md-3 mb-3">
                <label for="id_first_name">First Name:</label>
                <input type="text" name="first_name" id="id_first_name" class="form-control" value="{{ filter.form.first_name.value|default:'' }}">
            </div>
            <div class="col-md-3 mb-3">
                <label for="id_last_name">Last Name:</label>
                <input type="text" name="last_name" id="id_last_name" class="form-control" value="{{ filter.form.last_name.value|default:'' }}">
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
        <a href="{% url 'user_table' %}" class="btn btn-secondary">Reset</a>
    </form>
</div>
<!-- Eto user table -->

<div>
    <h3>
        User Records
    </h3>

    <div id="table-container"
        hx-get="{% url 'get_latest_users' %}"
        hx-trigger="every 5s"
        hx-swap="outerHTML">
        {% include 'papsas_app/partial_list/account_list.html' %}
    </div>
</div>
{% endblock %}

{% block script %}
<script src="{% static 'papsas_app/js/user_record.js' %}"></script>
{% endblock %}